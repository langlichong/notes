

要注意和字符串截断报错问题的区别 字符串截断，只是纯粹的精度不够，如varchar(400), 是可以放400 个字节的字符串，我们让它要放入401 个，就会报错字符串截断。
字符串截断和数据溢出，是一个类型的错误，数据溢出就是非字符串类型，精度不足。


select page(); -- 一条记录的长度不能超过页大小的一半
我们可以简单理解为，对于任何表的一行记录（不包括大字段），他们的总长达（字节大小）， 不能超过页大小的一半。（也就是所谓的行内数据，对于LOB 字段，绝大部分都是行外数据）


我们在从Oracle 或者其他数据库迁移数据到达梦数据库时（含使用DTS ），以及甚至平时，自己平时插入数据时，都可能碰到一个错误：

记录超长

 

碰到这种问题，我们怎么解决呢？

有三个方法

Ø   考虑更加合适的页大小（扩大），重新初始化实例后，重新导入数据

Ø   对表启用超长列存储功能，重新导入（或者插入）数据 ：
       利用图形界面，对该表启用超长记录  
       或 SQL  : alter table XXX enable using long row 

Ø   把很长的varchar 类型，考虑使用CLOB 重建表后，再进行插入
    这个就是说的，本来我们一个表 test1(v1 int,…,vx int,vy varchar(8000)) ，插入数据时报错了，这个是我们：
    Alter table test1 rename to test1_modify;
    Create table test1(v1 int,…,vx int,vy clob);
    Insert into test1 select * from test1_modify;commit;
    然后，在进行相关操作，就不会碰到记录超长的问题了
    
    这个方法可能会涉及到代码改造，比如对应字段在应用端的处理，varchar 类型和CLOB 类型的处理方式存在区别。
    CLOB 字段也可以直接like ，但和 CLOB_LIKE_MAX_LEN 该参数有关系，注意学习下达梦配置文件（dm.ini 参考DBA 手册 正解 2.1.1 ）：
        CLOB_LIKE_MAX_LEN    默认值为 31 静态参数
        LIKE 语句中 CLOB 类型的最大长度，单位 KB ，有效值范围（ 8~102400 ）
